{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\TXY1572\\\\darthsanity\\\\capstone\\\\frontend\\\\react-paws-app\\\\react-boilerplate\\\\src\\\\App.js\";\nimport React, { Component } from 'react';\nimport './App.css';\nimport { Route, Link, withRouter, Switch } from 'react-router-dom'; //apihelper functions\n\nimport { registerUser, loginUser, verifyUser, fetchCrittersByUser, fetchAllPosts, addCritter, createPost, deletePost } from './services/apihelper'; //custom components\n\nimport Login from './Components/Users/Login';\nimport Register from './Components/Users/Register';\nimport PostContainer from './Components/Posts/PostContainer';\nimport ProfileContainer from './Components/Profiles/ProfileContainer';\nimport AnimalProfileContainer from './Components/Profiles/AnimalProfileContainer';\nimport Routes from './Components/Routes/Routes';\nimport AddAnimal from './Components/Animals/AddAnimal';\nimport CreatePostForm from './Components/Posts/CreatePostForm';\nimport ShowPost from './Components/Posts/ShowPost';\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.pageSetup = async currentUser => {\n      let animals;\n\n      if (currentUser) {\n        animals = await fetchCrittersByUser(this.state.currentUser.id);\n        const posts = await fetchAllPosts();\n        this.setState({\n          animals: animals,\n          posts: posts\n        });\n      }\n    };\n\n    this.handleRegister = async (e, user) => {\n      e.preventDefault();\n      const loadedUser = await registerUser(user);\n      this.setState({\n        currentUser: loadedUser\n      });\n      this.props.history.push('/profile');\n    };\n\n    this.handleLogin = async (e, user) => {\n      e.preventDefault();\n      const loadedUser = await loginUser(user);\n      this.setState({\n        currentUser: loadedUser\n      });\n      this.props.history.push('/post');\n    };\n\n    this.handleLogout = () => {\n      this.setState({\n        currentUser: null\n      });\n      localStorage.removeItem('authToken');\n      this.props.history.push('/post');\n    };\n\n    this.addAnimal = async (e, values) => {\n      e.preventDefault();\n      const newCritter = await addCritter(values, this.state.currentUser.id);\n      const animals = this.state.animals;\n      animals.push(newCritter.data);\n      this.setState({\n        animals\n      });\n      this.props.history.push('/profile');\n    };\n\n    this.newPost = async (e, values) => {\n      e.preventDefault();\n      const newPost = await createPost(values, this.state.currentUser.id);\n      console.log(newPost);\n      const posts = this.state.posts;\n      posts.push(newPost.data);\n      this.setState({\n        posts: posts\n      });\n      this.props.history.push('/post');\n    };\n\n    this.destroyPost = async id => {\n      await deletePost(id);\n      const allPosts = this.state.posts;\n      const remainingPosts = allPosts.filter(post => {\n        return post.id !== id;\n      });\n      this.setState({\n        posts: remainingPosts\n      });\n      this.props.history.push('/post');\n    };\n\n    this.state = {\n      currentUser: null,\n      animals: null,\n      posts: null\n    };\n  }\n\n  async componentDidMount() {\n    const currentUser = await verifyUser();\n\n    if (currentUser) {\n      this.setState({\n        currentUser: currentUser\n      });\n      this.pageSetup(currentUser);\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"app\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"header\", {\n      className: \"main-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: \"/kitty.png\",\n      alt: \"logo\",\n      width: \"10%\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"h1\", {\n      className: \"website-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 11\n      }\n    }, \"Paws Claws and Jaws!\"), /*#__PURE__*/React.createElement(\"img\", {\n      src: \"/coyote.png\",\n      alt: \"coyote\",\n      width: \"10%\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"nav\", {\n      className: \"main-nav\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 11\n      }\n    }, this.state.currentUser ? /*#__PURE__*/React.createElement(\"button\", {\n      className: \"nav-links\",\n      id: \"logout\",\n      onClick: this.handleLogout,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 15\n      }\n    }, \"Logout\") : /*#__PURE__*/React.createElement(\"div\", {\n      className: \"nav-links\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/register\",\n      className: \"nav-links\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 17\n      }\n    }, \"SignUp\"), /*#__PURE__*/React.createElement(Link, {\n      to: \"/login\",\n      className: \"nav-links\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 17\n      }\n    }, \"Login\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"nav-links\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 13\n      }\n    }, this.state.currentUser && /*#__PURE__*/React.createElement(Link, {\n      to: \"/post\",\n      className: \"nav-links\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 40\n      }\n    }, \"Home\")))), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Route, {\n      exact: true,\n      path: \"/register\",\n      render: () => {\n        return /*#__PURE__*/React.createElement(Register, {\n          handleSubmit: this.handleRegister,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 20\n          }\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      exact: true,\n      path: \"/login\",\n      render: () => {\n        return /*#__PURE__*/React.createElement(Login, {\n          handleSubmit: this.handleLogin,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 20\n          }\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      path: \"/profile\",\n      render: () => {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 20\n          }\n        }, this.state.currentUser && /*#__PURE__*/React.createElement(ProfileContainer, {\n          user: this.state.currentUser,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 42\n          }\n        }));\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      path: \"/post\",\n      render: () => {\n        return /*#__PURE__*/React.createElement(PostContainer, {\n          user: this.state.currentUser,\n          animals: this.state.animals,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 20\n          }\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      path: \"/critter\",\n      render: () => {\n        return /*#__PURE__*/React.createElement(AnimalProfileContainer, {\n          user: this.state.currentUser.id,\n          animals: this.state.animals,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 20\n          }\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      path: \"/create\",\n      render: () => {\n        return /*#__PURE__*/React.createElement(AddAnimal, {\n          handleSubmit: this.addAnimal,\n          user: this.state.currentUser.id,\n          animals: this.state.animals,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 24\n          }\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      path: \"/post/new\",\n      render: () => {\n        return /*#__PURE__*/React.createElement(CreatePostForm, {\n          handleSubmit: this.newPost,\n          user: this.state.currentUser.id,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 22\n          }\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 11\n      }\n    })));\n  }\n\n}\n\nexport default withRouter(App);","map":{"version":3,"sources":["C:/Users/TXY1572/darthsanity/capstone/frontend/react-paws-app/react-boilerplate/src/App.js"],"names":["React","Component","Route","Link","withRouter","Switch","registerUser","loginUser","verifyUser","fetchCrittersByUser","fetchAllPosts","addCritter","createPost","deletePost","Login","Register","PostContainer","ProfileContainer","AnimalProfileContainer","Routes","AddAnimal","CreatePostForm","ShowPost","App","constructor","props","pageSetup","currentUser","animals","state","id","posts","setState","handleRegister","e","user","preventDefault","loadedUser","history","push","handleLogin","handleLogout","localStorage","removeItem","addAnimal","values","newCritter","data","newPost","console","log","destroyPost","allPosts","remainingPosts","filter","post","componentDidMount","render"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport './App.css';\r\nimport { Route, Link, withRouter, Switch } from 'react-router-dom';\r\n\r\n//apihelper functions\r\nimport {registerUser, loginUser, verifyUser, fetchCrittersByUser, fetchAllPosts, addCritter, createPost, deletePost } from './services/apihelper'\r\n\r\n//custom components\r\nimport Login from './Components/Users/Login';\r\nimport Register from './Components/Users/Register';\r\nimport PostContainer from './Components/Posts/PostContainer';\r\nimport ProfileContainer from './Components/Profiles/ProfileContainer';\r\nimport AnimalProfileContainer from './Components/Profiles/AnimalProfileContainer';\r\nimport Routes from './Components/Routes/Routes';\r\nimport AddAnimal from './Components/Animals/AddAnimal';\r\nimport CreatePostForm from './Components/Posts/CreatePostForm';\r\nimport ShowPost from './Components/Posts/ShowPost';\r\n\r\nclass App extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n      this.state = {\r\n        currentUser: null,\r\n        animals: null,\r\n        posts: null,\r\n      }\r\n    }\r\n\r\npageSetup = async(currentUser) => {\r\n  let animals;\r\n  if(currentUser) {\r\n      animals = await (fetchCrittersByUser(this.state.currentUser.id));\r\n      const posts = await (fetchAllPosts());\r\n      this.setState({\r\n        animals: animals,\r\n        posts: posts\r\n      })\r\n    }\r\n  }\r\n\r\n\r\nhandleRegister = async (e, user) => {\r\n  e.preventDefault();\r\n  const loadedUser = await registerUser(user);\r\n  this.setState({\r\n    currentUser: loadedUser\r\n  })\r\n  this.props.history.push('/profile');\r\n}\r\n\r\nhandleLogin = async (e, user) => {\r\n  e.preventDefault();\r\n  const loadedUser = await loginUser(user);\r\n  this.setState({\r\n    currentUser: loadedUser\r\n  })\r\n  this.props.history.push('/post');\r\n}\r\n\r\nhandleLogout = () => {\r\n  this.setState({\r\n    currentUser: null\r\n  })\r\n  localStorage.removeItem('authToken');\r\n  this.props.history.push('/post');\r\n}\r\n\r\nasync componentDidMount() {\r\n  const currentUser = await verifyUser();\r\n  if(currentUser) {\r\n    this.setState({\r\n      currentUser: currentUser,\r\n    })\r\n    this.pageSetup(currentUser);\r\n  }\r\n}\r\n\r\naddAnimal = async (e, values) => {\r\n  e.preventDefault();\r\n  const newCritter = await addCritter(values, this.state.currentUser.id);\r\n  const animals = this.state.animals;\r\n  animals.push(newCritter.data);\r\n  this.setState({\r\n    animals\r\n  })\r\n  this.props.history.push('/profile')\r\n}\r\n\r\nnewPost = async (e, values) => {\r\n  e.preventDefault();\r\n  const newPost = await createPost(values, this.state.currentUser.id);\r\n  console.log(newPost);\r\n  const posts = this.state.posts;\r\n  posts.push(newPost.data);\r\n  this.setState({\r\n      posts: posts\r\n  })\r\n  this.props.history.push('/post')\r\n}\r\n\r\ndestroyPost = async(id) => {\r\n  await deletePost(id);\r\n  const allPosts = this.state.posts;\r\n  const remainingPosts = allPosts.filter(post => {\r\n      return post.id !== id\r\n  })\r\n  this.setState({\r\n      posts: remainingPosts\r\n  })\r\n  this.props.history.push('/post');\r\n}\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"app\">\r\n        <header className=\"main-header\">\r\n          <img src=\"/kitty.png\" alt=\"logo\" width=\"10%\" />\r\n          <h1 className=\"website-title\">Paws Claws and Jaws!</h1>\r\n          <img src=\"/coyote.png\" alt=\"coyote\" width=\"10%\" />\r\n          <nav className = \"main-nav\">\r\n\r\n              {this.state.currentUser ?\r\n              <button className=\"nav-links\" id=\"logout\" onClick={this.handleLogout}>Logout</button> : (\r\n              <div className=\"nav-links\">\r\n                <Link to=\"/register\" className=\"nav-links\">SignUp</Link>\r\n                <Link to=\"/login\" className=\"nav-links\">Login</Link>\r\n              </div>\r\n            )}\r\n            <div className=\"nav-links\">\r\n            {this.state.currentUser && <Link to=\"/post\" className=\"nav-links\">Home</Link>}\r\n            </div>\r\n          </nav>\r\n        </header>\r\n\r\n\r\n        <div>\r\n          <Route exact path=\"/register\" render={() => {\r\n            return <Register handleSubmit={this.handleRegister} />\r\n            }}\r\n          />\r\n\r\n          <Route exact path=\"/login\" render={() => {\r\n            return <Login handleSubmit={this.handleLogin} />\r\n            }}\r\n          />\r\n\r\n          <Route path=\"/profile\" render={() => {\r\n            return <div>\r\n              {this.state.currentUser && <ProfileContainer user={this.state.currentUser} />}\r\n            </div>\r\n            }}\r\n          />\r\n\r\n          <Route path=\"/post\" render={() => {\r\n            return <PostContainer user={this.state.currentUser} animals={this.state.animals}/>\r\n            }}\r\n          />\r\n          <Route path=\"/critter\" render={() => {\r\n            return <AnimalProfileContainer user={this.state.currentUser.id} animals={this.state.animals} />\r\n          }} />\r\n\r\n          <Route path='/create' render={() => {\r\n                return <AddAnimal handleSubmit={this.addAnimal}\r\n                user={this.state.currentUser.id} animals={this.state.animals}/>\r\n          }}/>\r\n\r\n          <Route path=\"/post/new\" render={() => {\r\n              return <CreatePostForm handleSubmit={this.newPost}\r\n                user={this.state.currentUser.id}/>\r\n          }}/>\r\n\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\n\r\nexport default withRouter(App);\r\n"]},"metadata":{},"sourceType":"module"}